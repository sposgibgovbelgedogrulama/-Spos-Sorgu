<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>GİB Ödeme Sorgulama</title>
<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#e6e9f3;}
.header{background:#fff;text-align:center;}
.header img{width:100%;max-height:130px;object-fit:contain;}
.container{width:920px;margin:20px auto;background:#dde1f2;border-radius:14px;padding:20px;}
.content{display:flex;gap:20px;}
.form-box{flex:1.3;}
.info-box{flex:0.7;background:#eef0fa;border-radius:12px;padding:15px;font-size:13px;line-height:1.45;border:1px solid #c6cbe3;}
.group-box{background:#f5f6fb;border:1px solid #c6cbe3;border-radius:10px;padding:15px;margin-bottom:15px;}
.row{display:flex;align-items:center;margin-bottom:10px;}
.row label{width:280px;font-size:14px;}
.row input,.row select{padding:5px;font-size:14px;}
.buttons{text-align:center;margin-top:10px;}
button{padding:6px 14px;font-size:13px;cursor:pointer;border:1px solid #999;border-radius:4px;background:#e6e6e6;margin-right:5px;}
button:hover{background:#dcdcdc;}
.amount{width:70px;margin-right:5px;}
#errorBox{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#f8d7da;color:#842029;padding:20px 30px;border:1px solid #f5c2c7;border-radius:8px;font-weight:bold;text-align:center;z-index:1000;}
#resultBox{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;color:#000;padding:20px 30px;border:2px solid #999;border-radius:8px;font-weight:bold;text-align:center;z-index:1000;min-width:250px;}
</style>
</head>
<body>

<div class="header">
    <img src="https://spos.gib.gov.tr/Spos/gib_baslik.jpg" alt="Gelir İdaresi Başkanlığı">
</div>

<div class="container">
<div class="content">

<div class="form-box">

<div class="group-box">
    <div class="row">
        <label>Alındı Kimliği (Barkod) (Receipt Id)</label>
        <input id="barcodeInput" type="text">
    </div>
    <div class="row">
        <label>Ödeme Yılı (Payment Year)</label>
        <select id="yearSelect">
            <script>
                for(let y=2026; y>=2018; y--){
                    document.write('<option>'+y+'</option>');
                }
            </script>
        </select>
        <button onclick="fastQuery()">Hızlı (Go) &gt;&gt;</button>
    </div>
</div>

<div class="group-box">
    <div class="row">
        <label>Ödeme Tarihi (Payment Date)</label>
        <select>
            <script>
                for(let d=1; d<=31; d++){
                    let dd = d<10 ? '0'+d : d;
                    document.write('<option value="'+dd+'">'+dd+'</option>');
                }
            </script>
        </select>
        <select>
            <option value="01">Oca (Jan)</option>
            <option value="02">Şub (Feb)</option>
            <option value="03">Mar (Mar)</option>
            <option value="04">Nis (Apr)</option>
            <option value="05">May (May)</option>
            <option value="06">Haz (Jun)</option>
            <option value="07">Tem (Jul)</option>
            <option value="08">Ağu (Aug)</option>
            <option value="09">Eyl (Sep)</option>
            <option value="10">Eki (Oct)</option>
            <option value="11">Kas (Nov)</option>
            <option value="12">Ara (Dec)</option>
        </select>
        <select>
            <script>
                for(let y=2026; y>=2018; y--){
                    document.write('<option>'+y+'</option>');
                }
            </script>
        </select>
    </div>
    <div class="row"><label>Kart Numarası (Card Number)</label><input type="password" placeholder="******"></div>
    <div class="row"><label>Toplam Ödenen (Total Paid)</label><input type="text" class="amount"> TL<input type="text" class="amount"> Kr</div>
    <div class="row"><label>Plaka (Plate) No</label><input type="text"></div>
    <div class="row"><label>Tahakkuk / Belge / IMEI No</label><input type="text"></div>
</div>

<div class="buttons">
    <button onclick="showError()">Sorgula (Query) &gt;&gt;</button>
</div>

</div>

<div class="info-box">
<p class="bullet">
Alındınız varsa, barkod alanı altındaki değeri girerek daha hızlı sorgu yapabilirsiniz.<br>
<span class="en">(If you have a receipt, you can query faster by entering the value under the bar code field.)</span>
</p>
<p class="bullet">
Alındınız yoksa, ödeme tarihinizi, ödeme miktarını, plaka veya
tahakkuk/belge/IMEI numaralarından birini ve kredi kartı numaranızın
ilk 6 ve son 4 rakamını girerek sorgu yapabilirsiniz.<br>
<span class="en">(If you do not have a receipt, you can query with payment date, amount paid,
plate or one of accrual/ticket/IMEI numbers and the first 6 last 4 digits of your card number.)</span>
</p>
<p class="bullet">
<strong>Güvenliğiniz için:</strong>
Genel kullanımı olan bilgisayarlarda çalıştıktan sonra tarayıcının tuttuğu
kişisel bilgilerinizi silmeden ayrılmayınız.<br>
<span class="en">(After using computers that have general use, do not leave without clearing browser's cache.)</span>
</p>
</div>

</div>
</div>

<div id="errorBox">Eksik veya hatalı bilgi girdiniz. Lütfen bilgilerinizi kontrol ediniz.</div>
<div id="resultBox">Belge doğrulanıyor...</div>

<script>
const validReceipts = {
    "016202-bMXAMRSTRXE": "https://raw.githubusercontent.com/sposgibgovbelgedogrulama/-Spos-Sorgu/main/IVD-Alindi-bMXAMRSTRXE1.pdf",
    "016202-bMPAMRSTQXE": "https://raw.githubusercontent.com/sposgibgovbelgedogrulama/-Spos-Sorgu/main/IVD-Alindi-bMPAMRSTQXE2.pdf"
};

function fastQuery() {
    const barcode = document.getElementById("barcodeInput").value.trim();
    const year = document.getElementById("yearSelect").value;
    const resultBox = document.getElementById("resultBox");

    resultBox.style.display = "none";

    if(year === "2025" && validReceipts[barcode]) {
        resultBox.style.display = "block";
        resultBox.style.color = "#000";
        resultBox.style.borderColor = "#999";
        resultBox.innerHTML = "Belge doğrulanıyor...";

        setTimeout(()=>{
            resultBox.innerHTML = "✅ Belge doğrulandı";
            resultBox.style.color = "green";
            resultBox.style.borderColor = "green";

            // 3 saniye sonra PDF indir
            setTimeout(()=>{
                const pdfUrl = validReceipts[barcode];
                const a = document.createElement('a');
                a.href = pdfUrl;
                a.download = pdfUrl.split('/').pop();
                a.click();

                // 2 saniye sonra mesaj kaybolsun
                setTimeout(()=>{
                    resultBox.style.display = "none";
                },2000);

            },3000);

        },3000);

    } else {
        showError();
    }
}

function showError() {
    const errorBox = document.getElementById("errorBox");
    errorBox.style.display = "block";
    setTimeout(()=>{errorBox.style.display="none";},5000);
}
</script>

</body>
</html>
